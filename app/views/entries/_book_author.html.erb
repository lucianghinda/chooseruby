<%# locals: (entry:) %>
<%# Enhanced author section for books %>

<% if entry.authors.any? %>
  <section class="rounded-3xl bg-white p-8 shadow-sm ring-1 ring-slate-100 sm:p-12">
    <h2 class="text-2xl font-semibold tracking-tight text-slate-900 mb-8">
      <%= entry.authors.size > 1 ? "About the Authors" : "About the Author" %>
    </h2>

    <div class="space-y-8">
      <% entry.authors.each do |author| %>
        <div class="flex flex-col sm:flex-row items-start gap-6">
          <%# Author Avatar - larger size %>
          <div class="flex-shrink-0">
            <% if author.avatar.attached? %>
              <%= image_tag author.avatar, alt: author.name, class: "w-24 h-24 rounded-2xl object-cover shadow-lg ring-4 ring-slate-100" %>
            <% elsif author.avatar_url.present? %>
              <%= image_tag author.avatar_url, alt: author.name, class: "w-24 h-24 rounded-2xl object-cover shadow-lg ring-4 ring-slate-100", onerror: "this.outerHTML='<div class=\"w-24 h-24 rounded-2xl bg-gradient-to-br from-rose-400 to-rose-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg\">#{author.name[0].upcase}</div>'" %>
            <% else %>
              <div class="w-24 h-24 rounded-2xl bg-gradient-to-br from-rose-400 to-rose-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg">
                <%= author.name[0].upcase %>
              </div>
            <% end %>
          </div>

          <%# Author Info %>
          <div class="flex-1">
            <%# Name %>
            <h3 class="text-xl font-semibold text-slate-900 mb-2">
              <%= link_to author.name, author_path(author.slug), class: "hover:text-rose-500 transition-colors" %>
            </h3>

            <%# Bio %>
            <% if author.bio.present? %>
              <p class="text-slate-600 leading-relaxed mb-4">
                <%= author.bio %>
              </p>
            <% end %>

            <%# Social Links %>
            <% social_links = author_social_links(author) %>
            <% if social_links.any? %>
              <div class="flex flex-wrap gap-2">
                <% social_links.each do |link| %>
                  <%= link_to link[:url], target: "_blank", rel: "noopener noreferrer", title: link[:name], class: "inline-flex items-center justify-center w-10 h-10 rounded-xl bg-slate-100 text-slate-500 hover:bg-rose-50 hover:text-rose-500 transition-colors" do %>
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                      <path d="<%= link[:icon_path] %>"/>
                    </svg>
                    <span class="sr-only"><%= link[:name] %></span>
                  <% end %>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>

        <%# Divider between authors (except last) %>
        <% unless author == entry.authors.last %>
          <hr class="border-slate-100">
        <% end %>
      <% end %>
    </div>
  </section>
<% end %>
